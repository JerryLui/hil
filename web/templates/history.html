{% extends "layout.html" %}
{% block script %}
	<script src="{{ url_for('static', filename='js/query_progress.js') }}"></script>
{% endblock %}
{% block content %}
	<div class="container container-spaced">
		<div class="row">
			<div class="col-12">
				<h1>Task history</h1>
				<table class="table table-striped table-dark bg-transparent-78">
					<thead>
					<tr>
						<th scope="col">Id</th>
						<th scope="col">User</th>
						<th scope="col">Log</th>
						<th scope="col">Time</th>
						<th scope="col">Status</th>
					</tr>
					</thead>
					<tbody>
					{% for task in tasks %}
						<tr>
							<th scope="row">
								<a href="/task/{{ task.id }}" class="link-aptiv" title="See task log">{{ task.id }}</a>
							</th>
							{% if task.user.name %}
								<td>{{ task.user.name }}</td>
							{% else %}
								<td>(deleted)</td>
							{% endif %}
							<td class="text-limit">{{ task.file.name }}</td>
							<td>{{ task.time_created.strftime('%y-%d-%m %H:%M') }}</td>
							<td>
								<a id="status-{{ task.id }}" href="task/{{ task.id }}" title="See task log" class="link-white">{{ task.status.name }}</a>
							</td>
						</tr>
					{% endfor %}
					</tbody>
				</table>
			</div>
		</div>
	</div>
{% endblock %}